!function e(n,t,r){function o(c,i){if(!t[c]){if(!n[c]){var a="function"==typeof require&&require;if(!i&&a)return a(c,!0);if(u)return u(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var l=t[c]={exports:{}};n[c][0].call(l.exports,function(e){var t=n[c][1][e];return o(t?t:e)},l,l.exports,e,n,t,r)}return t[c].exports}for(var u="function"==typeof require&&require,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(e,n,t){"use strict";function r(e){var n=e.keyCode;if(13===n&&o(),32===n&&c(),17===n&&u(),D===!0)switch(n){case 38:m();break;case 39:d();break;case 40:l();break;case 37:f()}}function o(){a(),g(),s(),D=!0}function u(){a()}function c(){var e=document.querySelector(".button.pause");D===!0?(clearInterval(A),e.className="button pause active",e.innerHTML="Paused",D=!1):I&&(s(),e.className="button pause",e.innerHTML="Pause",D=!0)}function i(){I=null,clearInterval(A),D=!1,document.querySelector(".msg").innerHTML="Game over! :("}function a(){D=!1,I=null,clearInterval(A),_=0,document.querySelector(".score strong").innerHTML=0,U=1,document.querySelector(".level strong").innerHTML=1;var e=document.querySelector(".button.pause");e.className="button pause",e.innerHTML="Pause",j.innerHTML="",document.querySelector(".msg").innerHTML="",k()}function s(){A=setInterval(function(){l()},F)}function l(){if(v()===!0){var e=T();I.nums.forEach(function(n,t,r){r[t]=n+B,e[t].style.top=z[n].y+K+"px"})}else q()}function f(){if(h()===!0){var e=T();I.nums.forEach(function(n,t,r){r[t]=n-1,e[t].style.left=z[n].x-K+"px"})}}function d(){if(p()===!0){var e=T();I.nums.forEach(function(n,t,r){r[t]=n+1,e[t].style.left=z[n].x+K+"px"})}}function m(){if(b()===!0){var e=T();I.nums.forEach(function(n,t,r){var o=n+I.turns[I.turnPosition][t];r[t]=o,e[t].style.left=z[o].x+"px",e[t].style.top=z[o].y+"px"}),I.turnPosition=3===I.turnPosition?0:I.turnPosition+1}}function y(){return I.nums.every(function(e){return z[e].empty})}function v(){return I.nums.every(function(e){var n=e+B;return z[n]&&z[n].empty!==!1})}function h(){return I.nums.every(function(e){var n=e-1;return(n+1)%B!==0&&z[n].empty!==!1})}function p(){return I.nums.every(function(e){var n=e+1;return n%B!==0&&z[n].empty!==!1})}function b(){return I.nums.every(function(e,n){var t=e+I.turns[I.turnPosition][n];return B/2>e%B?z[t]&&z[t].empty===!0&&(t+1)%B!==0:z[t]&&z[t].empty===!0&&t%B!==0})}function k(){z=[];for(var e=0;Q>e;e++){var n=(e>B-1?e-Math.floor(e/B)*B:e)*K,t=(e>B-1?Math.floor(e/B):0)*K;z[e]={x:n,y:t,empty:!0}}O.innerHTML="",O.style.width=B*K+"px",O.style.height=J*K+"px",O.style.marginTop=4*-K+"px";for(var r=0;B>r;r++){var o=document.createElement("div");o.className="line",o.style.left=r*K+"px",o.style.width=K+"px",O.appendChild(o)}}function x(e){switch(e){case"cell-increase":K+=1;break;case"cell-reduce":K>5&&(K-=1);break;case"width-increase":B+=1;break;case"width-reduce":B>5&&(B-=1);break;case"height-increase":J+=1;break;case"height-reduce":J>19&&(J-=1)}Q=B*J,a()}function q(){if(clearInterval(A),y()===!0){var e=T();I.nums.forEach(function(n,t,r){z[n].empty=!1,e[t].className="cell",e[t].setAttribute("data-index",n),t===r.length-1&&(S(),g(),s())})}else i()}function g(){I=C(G),I.nums.forEach(function(e){L(O,e,I.color)});for(var e=0;e<=N();e++)m();G=H(),j.innerHTML="";var n=C(G,0,0);n.nums.forEach(function(e){L(j,e,n.color)})}function S(){var e=M();0!==e.length&&(e.forEach(function(e,n){for(var t=e+B*n,r=Q-1;r>=0;r--)t>r&&r>=B&&(z[r+B].empty=z[r].empty);for(var o=document.querySelectorAll("#board .cell"),u=0;u<o.length;u++){var c=+o[u].dataset.index;if(t>c){o[u].setAttribute("data-index",c+B);var i=z[c].y+K+"px";o[u].style.top=i}else c>=t&&t+B>c&&O.removeChild(o[u])}}),w(e.length),P(_))}function M(){for(var e=[],n=Q-B;n>=0;n-=B)if(z[n].empty===!1)for(var t=0;B>t&&z[n+t].empty!==!0;t++)t===B-1&&e.push(n);return e}function w(e){switch(e){case 1:_+=100;break;case 2:_+=400;break;case 3:_+=900;break;case 4:_+=1200}document.querySelector(".score strong").innerHTML=_}function P(e){e>=4e3&&5!==U?(U=5,F=50):e>=3e3&&4!==U?(U=4,F=100):e>=2e3&&3!==U?(U=3,F=150):e>=1e3&&2!==U&&(U=2,F=200),document.querySelector(".level strong").innerHTML=U}function T(){return document.querySelectorAll("#board .figure")}function L(e,n,t){var r=document.createElement("div");r.className="figure",r.style.left=z[n].x+"px",r.style.top=z[n].y+"px",r.style.width=K+"px",r.style.height=K+"px",r.style.backgroundColor=t,e.appendChild(r)}function E(e){for(var n=e.length;n;n--){var t=Math.floor(Math.random()*n),r=[e[t],e[n-1]];e[n-1]=r[0],e[t]=r[1]}return e}function H(){return E(["i","j","l","o","s","t","z"])[0]}function N(){return E(["0","1","2","3"])[0]}function C(e,n,t){var r=void 0!==n?n:Math.floor(B/2)-1,o=void 0!==t&&t>=B?t:B,u=void 0;switch(e){case"i":u={color:"#b4a42b",nums:[r+o,r+o+1,r+o+2,r+o+3],turnPosition:0,turns:[[-o+2,1,o,2*o-1],[o+1,0,-o-1,2*-o-2],[2*o-1,o,1,-o+2],[2*-o-2,-o-1,0,o+1]]};break;case"j":u={color:"#858d66",nums:[r+2*o,r+1+2*o,r+2+2*o,r+2+3*o],turnPosition:0,turns:[[-o+1,0,o-1,-2],[o+1,0,-o-1,2*-o],[o-1,0,-o+1,2],[-o-1,0,o+1,2*o]]};break;case"l":u={color:"#717845",nums:[r+2*o,r+3*o,r+1+2*o,r+2+2*o],turnPosition:0,turns:[[-o+1,2*-o,0,o-1],[o+1,2,0,-o-1],[o-1,2*o,0,-o+1],[-o-1,-2,0,o+1]]};break;case"o":u={color:"#7b6c05",nums:[r+2*o,r+3*o,r+1+2*o,r+1+3*o],turnPosition:0,turns:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]};break;case"s":u={color:"#5a6636",nums:[r+2*o,r+1+o,r+1+2*o,r+2+o],turnPosition:0,turns:[[-o+1,o+1,0,2*o],[1,-1,-o,-o-2],[2*o,0,o+1,-o+1],[-o-2,-o,-1,1]]};break;case"t":u={color:"#404d1f",nums:[r+2*o,r+1+2*o,r+1+3*o,r+2+2*o],turnPosition:0,turns:[[-o+1,0,-o-1,o-1],[o+1,0,-o+1,-o-1],[o-1,0,o+1,-o+1],[-o-1,0,o-1,o+1]]};break;case"z":u={color:"#21360d",nums:[r+o,r+1+o,r+1+2*o,r+2+2*o],turnPosition:0,turns:[[1,o,-1,o-2],[o+1,0,-o+1,2*-o],[o-2,-1,o,1],[2*-o,-o+1,0,o+1]]}}return u}var I=void 0,A=void 0,O=document.querySelector("#board"),j=document.querySelector(".next-box"),z=[],D=!1,U=1,_=0,F=250,G=H(),B=20,J=34,K=20,Q=B*J;k(),document.onkeydown=function(e){return r(e)},document.querySelector(".button.start").onclick=function(){return o(),!1},document.querySelector(".button.pause").onclick=function(){return c(),!1},document.querySelector(".button.stop").onclick=function(){return u(),!1},document.querySelector(".button.cell-increase").onclick=function(){return x("cell-increase"),!1},document.querySelector(".button.cell-reduce").onclick=function(){return x("cell-reduce"),!1},document.querySelector(".button.width-increase").onclick=function(){return x("width-increase"),!1},document.querySelector(".button.width-reduce").onclick=function(){return x("width-reduce"),!1},document.querySelector(".button.height-increase").onclick=function(){return x("height-increase"),!1},document.querySelector(".button.height-reduce").onclick=function(){return x("height-reduce"),!1}},{}]},{},[1]);